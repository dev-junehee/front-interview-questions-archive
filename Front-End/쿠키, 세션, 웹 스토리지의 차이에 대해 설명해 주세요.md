### 사전 지식

HTTP는 기본적으로 비연결성지향(connectionless), 무상태 프로토콜(stateless protocol)이기 때문에 이러한 한계를 보완하기 위해 쿠키와 세션 등을 사용합니다. 쿠키, 세션, 웹 스토리지 모두 **클라이언트 측에서 데이터를 저장하고 관리하는 방법**이며, 이러한 방법은 **사용자 경험을 향상시키고 상태를 유지하는데 사용**됩니다.

<br />

## 쿠키 (Cookie)

클라이언트(브라우저) 로컬에 저장되는 키(key)와 값(value) 형태의 작은 파일로 이름, 값, 만료 시간, 경로 정보를 포함합니다.

- **용도** : 사용자 정보를 클라이언트 측에 저장하여 서버에 전송할 때 사용
- **저장 위치** : 클라이언트 브라우저
- **유효 기간** : 설정한 만료 날짜 혹은 세션 종료 시까지
- **크기 제한** : 하나의 쿠키값은 4KB / 하나의 도메인당 20개 / 클라이언트에 총 300개 쿠키 저장 가능
- **사용 목적**
    - 서버에 저장해야 할 로그인, 장바구니, 게임 스코어 등의 정보 관리
    - 사용자가 선호하는 옵션이나 테마 등의 세팅
    - 사용자의 행동을 분석하고 기록하는 용도
- Response Header에 `set-cookie` 속성을 사용하면 클라이언트에 쿠키를 만들 수 있습니다.
- 만들어진 쿠키는 사용자가 따로 요청하지 않아도 브라우저가 서버에 요청(request)를 보낼 때 Request Header에 자동으로 넣어 서버에 전송합니다.

<br />

## 세션 (Session)

세션은 쿠키와 달리 사용자 정보를 서버 측에서 관리합니다.

- **용도** : 세션 동안에만 유지되는 데이터를 저장할 때 사용
- **저장 위치** : 서버 측에 저장
    - 클라이언트가 서버에 요청(request)를 보내면 응답(response)에 `set-cookie` 를 통해 클라이언트의 유일한 ID값을 생성해 부여합니다.
    - 이를 통해 사용자 정보는 서버에 저장되어 안전하며 클라이언트-서버 사이에는 ID값만 전달하여 보안성을 높여줍니다.
- **유효 기간** : 브라우저 세션이 유지되는 동안 (브라우저를 닫을 때 삭제)
- **크기 제한** : 제한 없음
- **사용 목적**
    - 타인에게 노출되는 경우를 막아야 하는 중요한 정보를 서버 내에서 다루기 위해 사용

<br />

## 쿠키와 세션의 차이

- 저장 위치 : 쿠키는 클라이언트(브라우저), 세션은 서버에 저장합니다.
- 보안 : 쿠키는 저장 위치 특성상 보안에 취약하며, 세션은 쿠키를 이용해 ID만 저장하고 나머지는 서버에서 처리하기 때문에 보안성에서 쿠키보다 우수합니다.
- 라이프 사이클 : 쿠키는 브라우저를 종료해도 만료 기간이 남아있으면 데이터가 유지되며 세션은 브라우저 종료 시 만료 기간에 상관없이 삭제됩니다.
- 속도 : 쿠키 > 세션

<br />

## 웹 스토리지 (Web Storage)

HTML5부터 추가된 저장소로 클라이언트 측에서 데이터를 영구적 또는 일시적으로 보관하는지에 따라 로컬 스토리지와 세션 스토리지로 구분하여 사용합니다.

- **용도** : 클라이언트에서 데이터를 영구적/일시적으로 유지할 때 사용
- **저장 위치** : 클라이언트 브라우저
- **유효 기간**
    - 로컬 스토리지 - 사용자가 수동으로 삭제하거나 애플리케이션이 삭제되지 않으면 영구적으로 유지
    - 세션 스토리지 - 브라우저 세션이 유지되는 동안
- **크기 제한** : 데스크탑 5MB / 모바일 2.5MB
- **사용 목적**
    - 로컬 스토리지 - 자동 로그인 등
    - 세션 스토리지 - 일회성 로그인 정보, 비로그인 장바구니, 입력폼 저장 등
- 쿠키와 달리 자동 전송의 위험성이 없습니다.
- 오리진 단위로 접근이 제한되는 특성 때문에 CSRF(Cross-Site Request Forgery)로부터 안전합니다.
- 문자형(string) 데이터 타입만 지원합니다.
- 세션 스토리지는 브라우저 탭에도 종속되어 있기 때문에 같은 페이지라도 다른 탭에서 열린다면 해당 데이터를 찾을 수 없습니다.
